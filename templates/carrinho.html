<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrinho - Loja de Informática</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="/">Loja</a>
    <div>
      <a href="/produtos" class="btn btn-outline-light btn-sm">Voltar</a>
      <a href="/logout" class="btn btn-outline-light btn-sm ms-2">Sair</a>
    </div>
  </div>
</nav>

<div class="container mt-4">
  <h2 class="mb-4">Seu Carrinho</h2>

  {% if carrinho %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Produto</th>
        <th>Preço</th>
        <th>Quantidade</th>
        <th>Total</th>
        <th>Ação</th>
      </tr>
    </thead>
    <tbody>
      {% for item in carrinho %}
      <tr>
        <td>{{ item.nome }}</td>
        <td>R$ {{ "%.2f"|format(item.preco) }}</td>
        <td>{{ item.quantidade }}</td>
        <td>R$ {{ "%.2f"|format(item.preco * item.quantidade) }}</td>
        <td>
          <a href="/carrinho/deletar/{{ item.id }}" class="btn btn-danger btn-sm" onclick="return confirm('Remover este item?')">Remover</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p>Total: R$ {{ "%.2f"|format(total) }}</p>
    <form action="/finalizar-compra" method="post">
        <label for="pagamento">Forma de pagamento:</label>
        <select name="pagamento" id="pagamento" required>
            <option value="boleto">Boleto</option>
            <option value="cartao">Cartão de Crédito</option>
            <option value="pix">PIX</option>
        </select>
        <button type="submit">Finalizar Compra</button>
    </form>
{% else %}
    <p>O carrinho está vazio.</p>
{% endif %}
</div>
</body>
</html>
